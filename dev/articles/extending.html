<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="tibble">
<title>Extending tibble • tibble</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.8/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.8/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extending tibble">
<meta property="og:description" content="tibble">
<meta property="og:image" content="https://tibble.tidyverse.org/logo.svg">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script defer data-domain="tibble.tidyverse.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">tibble</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">3.2.1.9014</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/tibble.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/types.html">Column types</a>
    <a class="dropdown-item" href="../articles/numbers.html">Controlling display of numbers</a>
    <a class="dropdown-item" href="../articles/digits.html">Comparing display with data frames</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Developer</h6>
    <a class="dropdown-item" href="../articles/extending.html">Extending tibble</a>
    <a class="dropdown-item" href="../articles/invariants.html">Invariants: Comparing behavior with data frames</a>
    <a class="dropdown-item" href="../articles/formats.html">Column formats</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/index.html">More articles...</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <h6 class="dropdown-header" data-toc-skip>Releases</h6>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2020/04/tibble-3-0-0/">Version 3.0.0</a>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/03/tibble-2.1.1/">Version 2.1.1</a>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2019/01/tibble-2.0.1/">Version 2.0.1</a>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2018/11/tibble-2.0.0-pre-announce/">Version 2.0.0 pre-announcement</a>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2018/01/tibble-1-4-2/">Version 1.4.2</a>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/articles/2018/01/tibble-1-4-1/">Version 1.4.1</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../news/index.html">Changelog</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/tidyverse/tibble/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Extending tibble</h1>
                        <h4 data-toc-skip class="author">Kirill Müller,
Hadley Wickham</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidyverse/tibble/blob/HEAD/vignettes/extending.Rmd" class="external-link"><code>vignettes/extending.Rmd</code></a></small>
      <div class="d-none name"><code>extending.Rmd</code></div>
    </div>

    
    
<p>Tibbles are S3 objects of class
<code>c("tbl_df", "tbl", "data.frame")</code>. This means that they
inherit their behavior from the <code>"data.frame"</code> class and add
two subclasses <code>"tbl"</code> and <code>"tbl_df"</code>. The pillar
and tibble packages provide methods for <code>"tbl"</code> and
<code>"tbl_df"</code>, respectively. Package authors and programmers can
implement subclasses that extend either <code>"tbl_df"</code> (and its
subclasses) or only <code>"tbl"</code> to provide custom behavior for
tibble-like objects. In addition, vectors classes can be implemented
from scratch or on top of existing classes, to be used as columns. This
article provides links to the various customization points that help you
avoiding reimplement existing behavior, and describes the difference
between <code>"tbl"</code> and <code>"tbl_df"</code>.</p>
<p>Read more in <a href="https://adv-r.hadley.nz/index.html" class="external-link">the second
edition of Advanced R</a>:</p>
<ul>
<li>about the internal representation of data frames and tibbles in the
<a href="https://adv-r.hadley.nz/vectors-chap.html#lists" class="external-link">Lists</a> and
<a href="https://adv-r.hadley.nz/vectors-chap.html#tibble" class="external-link">Data frames
and tibbles</a> sections of the <a href="https://adv-r.hadley.nz/vectors-chap.html" class="external-link">Vectors
chapter</a>,</li>
<li>about R’s S3 object-oriented system in the <a href="https://adv-r.hadley.nz/s3.html" class="external-link">S3 chapter</a>.</li>
</ul>
<div class="section level2">
<h2 id="topics-documented-elsewhere">Topics documented elsewhere<a class="anchor" aria-label="anchor" href="#topics-documented-elsewhere"></a>
</h2>
<ul>
<li><p>Change or tweak the way a tibble prints:
<code><a href="https://pillar.r-lib.org/articles/extending.html" class="external-link">vignette("extending", package = "pillar")</a></code></p></li>
<li><p>Change or tweak the way a column type is printed in a tibble:
<code><a href="https://vctrs.r-lib.org/articles/pillar.html" class="external-link">vignette("pillar", package = "vctrs")</a></code></p></li>
<li><p>Implement a new column data type:
<code><a href="https://vctrs.r-lib.org/articles/s3-vector.html" class="external-link">vignette("s3-vector", package = "vctrs")</a></code></p></li>
<li><p>Making your tibble subclass work well with dplyr:
<code><a href="https://dplyr.tidyverse.org/reference/dplyr_extending.html" class="external-link">?dplyr::dplyr_extending</a></code></p></li>
</ul>
</div>
<div class="section level2">
<h2 id="data-frame-subclasses">Data frame subclasses<a class="anchor" aria-label="anchor" href="#data-frame-subclasses"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/">tibble</a></span><span class="op">)</span></span></code></pre></div>
<p>For tibble &gt;= 3.0.0, the <code>"tbl"</code> class is responsible
for printing, while the <code>"tbl_df"</code> class adds tibble’s sturdy
subsetting and subset assignment behavior (see
<code><a href="../articles/invariants.html">vignette("invariants")</a></code> for details). This means that a data
frame class that would like to (mostly) print like a tibble but keep the
behavior from base R’s data frames can inherit from
<code>c("tbl", "data.frame")</code> or just from <code>"tbl"</code>. An
example is the <code>"tbl_sql"</code> class in the dbplyr package that
is used to implement lazy database tables.</p>
<div class="section level3">
<h3 id="tibble-example">Tibble example<a class="anchor" aria-label="anchor" href="#tibble-example"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_tbl_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/new_tibble.html">new_tibble</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, b <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span>,</span>
<span>  class <span class="op">=</span> <span class="st">"my_tbl_df"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl_sum.my_tbl_df</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"My custom tibble"</span> <span class="op">=</span> <span class="st">"Some info about it"</span>,</span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/UseMethod.html" class="external-link">NextMethod</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">my_tbl_df</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># My custom tibble: Some info about it</span></span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble:         3 × 2</span></span></span>
<span><span class="co">##       a     b</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>     1     2</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>     2     3</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>     3     4</span></span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_tbl_df</span><span class="op">[</span>, <span class="st">"a"</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># My custom tibble: Some info about it</span></span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble:         3 × 1</span></span></span>
<span><span class="co">##       a</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>     1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>     2</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>     3</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="data-frame-example">Data frame example<a class="anchor" aria-label="anchor" href="#data-frame-example"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_tbl</span> <span class="op">&lt;-</span> <span class="fu">vctrs</span><span class="fu">::</span><span class="fu"><a href="https://vctrs.r-lib.org/reference/new_data_frame.html" class="external-link">new_data_frame</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, b <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span>,</span>
<span>  class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"my_tbl"</span>, <span class="st">"tbl"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl_sum.my_tbl</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"My custom data frame"</span> <span class="op">=</span> <span class="st">"Some info about it"</span>,</span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/UseMethod.html" class="external-link">NextMethod</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">my_tbl</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># My custom data frame: Some info about it</span></span></span>
<span><span class="co">## <span style="color: #949494;"># A data frame:         3 × 2</span></span></span>
<span><span class="co">##       a     b</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>     1     2</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>     2     3</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>     3     4</span></span></code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_tbl</span><span class="op">[</span>, <span class="st">"a"</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 1 2 3</span></span></code></pre>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://krlmlr.info" class="external-link">Kirill Müller</a>, <a href="http://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://www.rstudio.com" class="external-link"><img src="https://www.tidyverse.org/rstudio-logo.svg" alt="RStudio" width="72"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.9000.</p>
</div>

  </div></footer>
</body>
</html>
